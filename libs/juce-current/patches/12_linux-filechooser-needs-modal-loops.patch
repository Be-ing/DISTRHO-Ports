diff --git a/modules/juce_gui_basics/native/juce_linux_FileChooser.cpp b/modules/juce_gui_basics/native/juce_linux_FileChooser.cpp
index 780716a80..2e2d51b76 100644
--- a/modules/juce_gui_basics/native/juce_linux_FileChooser.cpp
+++ b/modules/juce_gui_basics/native/juce_linux_FileChooser.cpp
@@ -26,6 +26,7 @@
 namespace juce
 {
 
+#if JUCE_MODAL_LOOPS_PERMITTED
 static bool exeIsAvailable (const char* const executable)
 {
     ChildProcess child;
@@ -240,10 +241,11 @@ private:
 
     JUCE_DECLARE_NON_COPYABLE_WITH_LEAK_DETECTOR (Native)
 };
+#endif
 
 bool FileChooser::isPlatformDialogAvailable()
 {
-   #if JUCE_DISABLE_NATIVE_FILECHOOSERS
+   #if JUCE_DISABLE_NATIVE_FILECHOOSERS || ! JUCE_MODAL_LOOPS_PERMITTED
     return false;
    #else
     static bool canUseNativeBox = exeIsAvailable ("zenity") || exeIsAvailable ("kdialog");
@@ -253,7 +255,11 @@ bool FileChooser::isPlatformDialogAvailable()
 
 FileChooser::Pimpl* FileChooser::showPlatformDialog (FileChooser& owner, int flags, FilePreviewComponent*)
 {
+#if JUCE_MODAL_LOOPS_PERMITTED
     return new Native (owner, flags);
+#else
+    return nullptr;
+#endif
 }
 
 } // namespace juce
